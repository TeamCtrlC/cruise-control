ExecutorState:
  type: object
  required:
    - state
  properties:
    state:
      type: string
      enum:
        - NO_TASK_IN_PROGRESS
        - STARTING_EXECUTION
        - INTER_BROKER_REPLICA_MOVEMENT_TASK_IN_PROGRESS
        - INTRA_BROKER_REPLICA_MOVEMENT_TASK_IN_PROGRESS
        - LEADER_MOVEMENT_TASK_IN_PROGRESS
        - STOPPING_EXECUTION
    recentlyDemotedBrokers:
      type: array
      items:
        type: number
    recentlyRemovedBrokers:
      type: array
      items:
        type: number
    triggeredSelfHealingTaskId:
      type: string
    triggeredUserTaskId:
      type: string
    maximumConcurrentLeaderMovements:
      type: number
    numPendingLeadershipMovements:
      type: number
    numFinishedLeadershipMovements:
      type: number
    numTotalLeadershipMovements:
      type: number
    pendingLeadershipMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    maximumConcurrentPartitionMovementsPerBroker:
      type: number
    numInProgressPartitionMovements:
      type: number
    abortingPartitions:
      type: number
    numPendingPartitionMovements:
      type: number
    numFinishedPartitionMovements:
      type: number
    numTotalPartitionMovements:
      type: number
    finishedDataMovement:
      type: number
    totalDataToMove:
      type: number
    inProgressPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    pendingPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    abortingPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    abortedPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    deadPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    completedPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    maximumConcurrentIntraBrokerPartitionMovementsPerBroker:
      type: number
    numInProgressIntraBrokerPartitionMovements:
      type: number
    numAbortingIntraBrokerPartitionMovements:
      type: number
    numPendingIntraBrokerPartitionMovements:
      type: number
    finishedIntraBrokerDataMovement:
      type: number
    numTotalIntraBrokerPartitionMovements:
      type: number
    totalIntraBrokerDataToMove:
      type: number
    inProgressIntraBrokerPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    pendingIntraBrokerPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    abortingIntraBrokerPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    abortedIntraBrokerPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    deadIntraBrokerPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    completedIntraBrokerPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    numCancelledLeadershipMovements:
      type: number
    numCancelledPartitionMovements:
      type: number
    numCancelledIntraBrokerPartitionMovements:
      type: number
    cancelledLeadershipMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    cancelledPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    cancelledIntraBrokerPartitionMovement:
      type: array
      items:
        $ref: '#/ExecutionTask'
    error:
      type: string

ExecutionTask:
  type: object
  required:
    - executionId
    - type
    - state
    - proposal
    - brokerId
  properties:
    executionId:
      type: number
    type:
      type: string
      enum:
        - INTER_BROKER_REPLICA_ACTION
        - INTRA_BROKER_REPLICA_ACTION
        - LEADER_ACTION
    state:
      type: string
      enum:
        - PENDING
        - IN_PROGRESS
        - ABORTING
        - ABORTED
        - DEAD
        - COMPLETED
    proposal:
      $ref: '#/ExecutionTaskProposal'
    brokerId:
      type: number

ExecutionTaskProposal:
  type: object
  required:
    - topicPartition
    - oldLeader
    - oldReplicas
    - newReplicas
  properties:
    topicPartition:
      type: string
    oldLeader:
      type: number
    oldReplicas:
      type: array
      items:
        type: number
    newReplicas:
      type: array
      items:
        type: number